#### 数据密集型应用系统设计

------

- 应用系统通常包含以下模块

  | 模块名称 | 功能                                           |
  | -------- | ---------------------------------------------- |
  | 数据库   | 用以存储数据                                   |
  | 高速缓存 | 缓存复杂或操作代价昂贵的结果, 以加快下一次访问 |
  | 索引     | 用户可以按关键字检索数据并过滤                 |
  | 流式处理 | 持续发送消息至另一个进程, 处理采用异步方式     |
  | 批处理   | 定期处理大量的累积数据                         |

- 数据密集型应用设计的三个目标 `可靠性`, `可扩展性`, `可维护性`

- 如何描述请求的响应时间, 我们可以通过多次请求取平均响应时间, 但这样的做法可能因各个响应时间的差异过大,而无法正确反应系统的性能, 我们可以从多个请求中取响应时间的中位数,或者众数的办法来正确描述系统的响应时间

- 如果数据大多是一对多关系或者记录之间没有关系,那么适合采用文档类型数据库来存储这样的数据例如`MongoDB`,如果数据是多对多关系那么采用关系型数据库存储较好例如`Mysql`

- `RPC`( remote procedure call ), `RPC`模型试图使远程网络服务请求看起来像本地函数调用那样相同

- 数据库复制, `主从复制`, `多主节点复制`, 复制的方式有`同步复制`和`异步复制`

- 主从复制, 一个主节点, 多个从节点, 所有写入通过主节点写入, 然后复制到从节点, 从节点通常是只读的

- 多主节点复制, 每个主节点都可以写入, 然后将数据复制到其它节点, 同时每个主节点也扮演着其它主节点的从节点

- 一致性哈希是一种平均分配负载的方法

- 按时间分表的弊端, 会使时间段内的所有写入操作都集中在同一个分表中, 可能会导致分表在写入时负载过高, 而其它分表始终处于空闲状态

- 通过关键字哈希分表,会使我们丧失区间查询特性, 即使关键字相邻, 但经过哈希之后也会分散在不同的分表中

